language: generic
os: osx

matrix:
    fast_finish: true
    include:
        - language: generic
          osx_image: xcode10
          env: PYTHON=3.7.0

before_install:
    - brew install autoconf automake libtool pkg-config
    - brew link libtool
    - brew install openssl readline
    - brew outdated pyenv || brew upgrade pyenv
    - brew install pyenv-virtualenv
    - pyenv install $PYTHON
    - export PYENV_VERSION=$PYTHON
    - export PATH="/Users/travis/.pyenv/shims:${PATH}"
    - pyenv-virtualenv venv
    - source venv/bin/activate
    - python --version
    - pip -V
    - pip install -r requirements.txt
    - pip install Cython==0.26.1
    - git clone https://github.com/kivy/kivy

script:
    - ./toolchain.py build openssl kivy
    - ./toolchain.py create touchtracer $PWD/kivy/examples/touchtracer
